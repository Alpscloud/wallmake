$(document).ready(function(){function e(){$(".js-calculator-total").html("от "+(d*n).toLocaleString()+" руб.")}function s(e,s){e.preventDefault();var i=s;if(inputs=i.find(".js-required-quiz-field"),flag=!0,$(inputs).each(function(){$(this).val()&&""!=$(this).val()||($(this).parents(".js-quiz-step").addClass("is-error"),flag=!1)}),!flag)return!1;$.ajax({type:"POST",url:"mail.php",data:i.serialize()}).done(function(){$("html").addClass("is-fixed"),$(".js-popup-thanks").fadeIn(300),setTimeout(function(){$("html").removeClass("is-fixed"),$(".js-popup-thanks").fadeOut(300),$(".js-quiz-step").removeClass("is-active").css("display","flex").hide(),$(".js-quiz-step:first-child").addClass("is-active").css("display","flex").hide().fadeIn(),$(".quiz-progress-dot").removeClass("is-active"),$(".quiz-progress-dot:first-child").addClass("is-active"),$(".quiz-progress-counter-current").text("1"),i.trigger("reset")},2e3)})}var i,t=$("body"),a=t.width();$(".js-open-popup-form-btn").on("click",function(e){e.preventDefault(),$(".js-popup-form").fadeIn(300),$("html").addClass("is-fixed")}),$(".js-close-popup-btn").on("click",function(e){e.preventDefault(),$(this).parents(".js-popup").fadeOut(300),$("html").removeClass("is-fixed")}),$(".popup__overflow").on("click",function(e){e.stopPropagation();var s=$(this).find(".popup__body");s.is(e.target)||0!==s.has(e.target).length||($("html").removeClass("is-fixed"),$(".js-popup").fadeOut(300))});var o=$(".header").innerHeight();if($(".js-smooth-scroll-link").on("click",function(e){e.preventDefault();var s=$(this).attr("href"),i=$(s).offset().top-o;$("html, body").animate({scrollTop:i},400)}),$(window).on("scroll",function(){clearTimeout(i),t.hasClass("disable-hover")||t.addClass("disable-hover"),i=setTimeout(function(){t.removeClass("disable-hover")},200),$(this).scrollTop()>0?$(".header").addClass("is-fixed"):$(".header").removeClass("is-fixed")}),$(".menu-item-has-children").each(function(){var e=$(this).find("> a");$('<button class="btn-toggle js-toggle-submenu-btn" type="button"></button>').insertAfter(e)}),$(".js-toggle-submenu-btn").on("click",function(e){e.preventDefault(),$(this).toggleClass("is-active"),$(this).parents(".menu-item-has-children").find(".sub-menu").stop().slideToggle(170)}),$(".js-open-mobile-menu-btn").on("click",function(e){e.preventDefault(),$(this).toggleClass("is-active"),$("html").toggleClass("is-fixed"),$(".js-menu").toggleClass("is-opened"),$(".header").toggleClass("is-menu-opened"),$(".js-search").hasClass("is-opened")&&$(".js-search").removeClass("is-opened")}),$(".js-open-search-form-btn").on("click",function(e){e.preventDefault(),$(this).toggleClass("is-active"),$(".js-search").stop().slideToggle(200)}),$(".js-open-mobile-search-form-btn").on("click",function(e){e.preventDefault(),$(".js-search").addClass("is-opened")}),$(".js-close-mobile-search-form-btn").on("click",function(e){e.preventDefault(),$(".js-search").removeClass("is-opened"),$(".search-input").val(""),$(".btn-clear").removeClass("is-visible"),a>992&&($(".js-search").stop().slideUp(200),$(".js-open-search-form-btn").removeClass("is-active"))}),$(".search-input").on("keyup",function(){$(this).val().length>=1?$(".btn-clear").addClass("is-visible"):$(".btn-clear").removeClass("is-visible")}),$(".btn-clear").on("click",function(){$(this).hasClass("is-visible")&&$(this).removeClass("is-visible")}),$(".js-promo-slider").length>0&&$(".js-promo-slider").slick({infinite:!0,fade:!0,cssEase:"linear",speed:1e3,autoplay:!0,autoplaySpeed:5e3,prevArrow:$(".js-promo-slider-btn-prev"),nextArrow:$(".js-promo-slider-btn-next"),dots:!0,appendDots:$(".js-promo-slider-pagination")}),$(".js-simple-slider").length>0&&$(".js-simple-slider").each(function(){var e=$(this),s=e.parents(".simple-slider__wrapper").find(".js-simple-slider-pagination");e.slick({infinite:!0,speed:600,arrows:!1,dots:!0,appendDots:s})}),$(".js-portfolio-slider").length>0&&$(".js-portfolio-slider").slick({infinite:!0,slidesToShow:4,slidesToScroll:2,speed:600,arrows:!1,dots:!0,appendDots:$(".js-portfolio-slider-pagination"),responsive:[{breakpoint:767,settings:{slidesToShow:1,variableWidth:!0,slidesToScroll:1}}]}),$(".js-advantages-slider").length>0&&$(".js-advantages-slider").slick({infinite:!0,centerMode:!0,slidesToShow:3,speed:600,arrows:!1,dots:!0,appendDots:$(".js-advantages-slider-pagination"),autoplay:!0,autoplaySpeed:3e3,accessibility:!1,responsive:[{breakpoint:1050,settings:{dots:!0,slidesToShow:1,variableWidth:!0,slidesToScroll:1,centerMode:!1}}]}),$(".js-presentation-slider").length>0&&$(".js-presentation-slider").slick({infinite:!0,slidesToShow:1,slidesToScroll:1,speed:600,arrows:!1,dots:!0,appendDots:$(".js-presentation-slider-pagination")}),$(".js-open-presentation-slider-btn").on("click",function(e){e.preventDefault(),$(this).addClass("is-hidden")}),$(".js-calculator-range").length>0){var n=parseInt($(".calculator-radio input[type=radio]:checked").val());$(".calculator-radio input[type=radio]").on("change",function(){return n=parseInt($(this).val()),e(),n});var r=$(".js-calculator-range"),l=parseInt(r.attr("data-max")),d=1;r.slider({animate:"slow",range:"min",min:0,max:l,steps:20,value:1,slide:function(e,s){return d=s.value,$(".js-calculator-range-value").text(d),$(".js-calculator-total").html("от "+(s.value*n).toLocaleString()+" руб."),d}})}if($("[data-fancybox]").fancybox({loop:!0}),$("input[type=tel]").inputmask({mask:"+7 (999) 999-9999",clearIncomplete:!1}),$(".js-quiz-step").length>0){var p=$(".js-quiz-step").length;!function(){for(var e="",s=0;s<=p-1;s++)e+='<span class="quiz-progress-dot"></span>';$(".quiz-progress-dots").html(e),$(".quiz-progress-counter-total").text("/"+p)}(),$(".quiz-progress-dot:first-child").addClass("is-active");var c=$(".js-quiz-step"),u=c.find(".js-quiz-step-controls");c.not(":nth-child(1)").hide(),c.first().addClass("is-active"),u.each(function(){var e=$(this);e.on("click",function(i){i.preventDefault();var t=$(".js-quiz").offset().top,o=$(i.target),n=o.attr("data-quiz-direction");if("BUTTON"===o.prop("tagName")){var r=e.parents(".js-quiz-step"),l=r.next(".js-quiz-step"),d=r.prev(".js-quiz-step"),p=l.index(),c=d.index();r.find("input[type=radio]:checked").length,r.find("input[type=checkbox]:checked").length,r.find("input[type=text]");if("next"===n){if(!l.length)return;$(".quiz-progress-dot").removeClass("is-active"),$(".quiz-progress-dot").eq(p).addClass("is-active"),$(".quiz-progress-counter-current").text(p+1),r.removeClass("is-active").css("display","flex").hide(),l.addClass("is-active").css("display","flex").hide().fadeIn()}else if("prev"===n){if(!d.length)return;r.removeClass("is-error"),$(".quiz-progress-dot").removeClass("is-active"),$(".quiz-progress-dot").eq(c).addClass("is-active"),$(".quiz-progress-counter-current").text(c+1),r.removeClass("is-active").css("display","flex").hide(),d.addClass("is-active").css("display","flex").hide().fadeIn()}"submit"==o.attr("type")&&s(i,$(".js-quiz-form")),a<767&&$("html, body").animate({scrollTop:t},170)}})}),c.find("input[type=radio]").on("change",function(){$(this).parents(".js-quiz-step").hasClass("is-error")&&$(this).parents(".js-quiz-step").removeClass("is-error")})}$(".js-prev-page-link").on("click",function(e){e.preventDefault(),window.history.go(-1)}),$(".js-required-quiz-field").on("focus",function(){$(this).parents(".js-quiz-step").hasClass("is-error")&&$(this).parents(".js-quiz-step").removeClass("is-error")}),setTimeout(function(){$("body").addClass("is-loaded")},1500)});