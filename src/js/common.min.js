$(document).ready(function(){function e(){$(".js-calculator-total").html("от "+(c*l).toLocaleString()+" руб.")}function s(e){$(".quiz-progress-dot").removeClass("is-active"),$(".quiz-progress-dot").eq(e).addClass("is-active"),$(".quiz-progress-counter-current").text(e+1)}function t(e){$(".quiz-progress-dot").removeClass("is-active"),$(".quiz-progress-dot").eq(e).addClass("is-active"),$(".quiz-progress-counter-current").text(e+1)}function i(e,s){e.preventDefault();var t=s;if(inputs=t.find(".js-required-quiz-field"),flag=!0,$(inputs).each(function(){$(this).val()&&""!=$(this).val()||($(this).parents(".js-quiz-step").addClass("is-error"),flag=!1)}),!flag)return!1;$.ajax({type:"POST",url:"mail.php",data:t.serialize()}).done(function(){$("html").addClass("is-fixed"),$(".js-popup-thanks").fadeIn(300),setTimeout(function(){$("html").removeClass("is-fixed"),$(".js-popup-thanks").fadeOut(300),$(".js-quiz-step").removeClass("is-active").css("display","flex").hide(),$(".js-quiz-step:first-child").addClass("is-active").css("display","flex").hide().fadeIn(),$(".quiz-progress-dot").removeClass("is-active"),$(".quiz-progress-dot:first-child").addClass("is-active"),$(".quiz-progress-counter-current").text("1"),t.trigger("reset")},2e3)})}var a,n=$("body"),o=n.width();$(".js-open-popup-form-btn").on("click",function(e){e.preventDefault(),$(".js-popup-form").fadeIn(300),$("html").addClass("is-fixed")}),$(".js-open-vacancy-form-btn").on("click",function(e){e.preventDefault(),$(".js-popup-vacancy-form").fadeIn(300),$("html").addClass("is-fixed")}),$(".js-close-popup-btn").on("click",function(e){e.preventDefault(),$(this).parents(".js-popup").fadeOut(300),$("html").removeClass("is-fixed")}),$(".popup__overflow").on("click",function(e){e.stopPropagation();var s=$(this).find(".popup__body");s.is(e.target)||0!==s.has(e.target).length||($("html").removeClass("is-fixed"),$(".js-popup").fadeOut(300))});var r=$(".header").innerHeight();if($(".js-smooth-scroll-link").on("click",function(e){e.preventDefault();var s=$(this).attr("href"),t=$(s).offset().top-r;$("html, body").animate({scrollTop:t},400)}),$(window).on("scroll",function(){clearTimeout(a),n.hasClass("disable-hover")||n.addClass("disable-hover"),a=setTimeout(function(){n.removeClass("disable-hover")},200),$(this).scrollTop()>0?$(".header").addClass("is-fixed"):$(".header").removeClass("is-fixed")}),$(".menu-item-has-children").each(function(){var e=$(this).find("> a");$('<button class="btn-toggle js-toggle-submenu-btn" type="button"></button>').insertAfter(e)}),$(".js-toggle-submenu-btn").on("click",function(e){e.preventDefault(),$(this).toggleClass("is-active"),$(this).parents(".menu-item-has-children").find(".sub-menu").stop().slideToggle(170)}),$(".js-open-mobile-menu-btn").on("click",function(e){e.preventDefault(),$(this).toggleClass("is-active"),$("html").toggleClass("is-fixed"),$(".js-menu").toggleClass("is-opened"),$(".header").toggleClass("is-menu-opened"),$(".js-search").hasClass("is-opened")&&$(".js-search").removeClass("is-opened")}),$(".js-open-search-form-btn").on("click",function(e){e.preventDefault(),$(this).toggleClass("is-active"),$(".js-search").stop().slideToggle(200)}),$(".js-open-mobile-search-form-btn").on("click",function(e){e.preventDefault(),$(".js-search").addClass("is-opened")}),$(".js-close-mobile-search-form-btn").on("click",function(e){e.preventDefault(),$(".js-search").removeClass("is-opened"),$(".search-input").val(""),$(".btn-clear").removeClass("is-visible"),o>992&&($(".js-search").stop().slideUp(200),$(".js-open-search-form-btn").removeClass("is-active"))}),$(".search-input").on("keyup",function(){$(this).val().length>=1?$(".btn-clear").addClass("is-visible"):$(".btn-clear").removeClass("is-visible")}),$(".btn-clear").on("click",function(){$(this).hasClass("is-visible")&&$(this).removeClass("is-visible")}),$(".js-promo-slider").length>0&&$(".js-promo-slider").slick({infinite:!0,fade:!0,cssEase:"linear",speed:1e3,autoplay:!0,autoplaySpeed:5e3,prevArrow:$(".js-promo-slider-btn-prev"),nextArrow:$(".js-promo-slider-btn-next"),dots:!0,appendDots:$(".js-promo-slider-pagination")}),$(".js-simple-slider").length>0&&$(".js-simple-slider").each(function(){var e=$(this),s=e.parents(".simple-slider__wrapper").find(".js-simple-slider-pagination");e.slick({infinite:!0,speed:600,arrows:!1,dots:!0,appendDots:s})}),$(".js-portfolio-slider").length>0&&$(".js-portfolio-slider").slick({infinite:!0,slidesToShow:4,slidesToScroll:2,speed:600,arrows:!1,dots:!0,appendDots:$(".js-portfolio-slider-pagination"),responsive:[{breakpoint:767,settings:{slidesToShow:1,variableWidth:!0,slidesToScroll:1}}]}),$(".js-advantages-slider").length>0&&$(".js-advantages-slider").slick({infinite:!0,centerMode:!0,slidesToShow:3,speed:600,arrows:!1,dots:!0,appendDots:$(".js-advantages-slider-pagination"),autoplay:!0,autoplaySpeed:3e3,accessibility:!1,responsive:[{breakpoint:1100,settings:{dots:!0,slidesToShow:1,variableWidth:!0,slidesToScroll:1,centerMode:!1}}]}),$(".js-presentation-slider").length>0&&$(".js-presentation-slider").slick({infinite:!0,slidesToShow:1,slidesToScroll:1,speed:600,arrows:!1,dots:!0,appendDots:$(".js-presentation-slider-pagination")}),$(".js-open-presentation-slider-btn").on("click",function(e){e.preventDefault(),$(this).addClass("is-hidden")}),$(".js-calculator-range").length>0){var l=parseInt($(".calculator-radio input[type=radio]:checked").val());$(".calculator-radio input[type=radio]").on("change",function(){return l=parseInt($(this).val()),e(),l});var p=$(".js-calculator-range"),d=parseInt(p.attr("data-max")),c=1;p.slider({animate:"slow",range:"min",min:0,max:d,steps:20,value:1,slide:function(e,s){return c=s.value,$(".js-calculator-range-value").text(c),$(".js-calculator-total").html("от "+(s.value*l).toLocaleString()+" руб."),c}})}$("[data-fancybox]").fancybox({loop:!0}),$(".js-toggle-chapter-card-content-btn").on("click",function(e){e.preventDefault(),$(this).toggleClass("is-active"),$(this).parents(".chapter-card__wrapper").find(".chapter-card__content-blocks").stop().slideToggle(150),$(this).parents(".chapter-card__wrapper").find(".chapter-card__content").toggleClass("is-active")});var u=$("input[type=file]");if(u.length>0&&u.each(function(){$(this).on("change",function(e){var s=$(this),t="",i=s[0].files.length;(t=s[0].files&&i>1?(s.attr("data-multiple-caption")||"").replace("{count}",i):e.target.value.split("\\").pop())&&s.parents(".form-file__wrapper").find(".form-file__result").html(t)})}),$(".js-toggle-hidden-input").on("change",function(e){$(this).parents("form").find(".form-group-toggle").stop().slideToggle(150)}),$("input[type=tel]").inputmask({mask:"+7 (999) 999-9999",clearIncomplete:!1}),$(".js-input-date").length>0&&$(".js-input-date").datepicker({monthNames:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],dayNamesMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],minDate:0,format:"dd.mm.yyyy",setDate:new Date}),$(".js-quiz-step").length>0){var f=$(".js-quiz-step").length;!function(){for(var e="",s=0;s<=f-1;s++)e+='<span class="quiz-progress-dot"></span>';$(".quiz-progress-dots").html(e),$(".quiz-progress-counter-total").text("/"+f)}(),$(".quiz-progress-dot:first-child").addClass("is-active");var h=$(".js-quiz-step"),v=h.find(".js-quiz-step-controls");h.not(":nth-child(1)").hide(),h.first().addClass("is-active"),$(".quiz select, .quiz [type=radio]").on("change",function(){var e=$(this).parents(".js-quiz-step"),t=e.next(),i=t.index();t.length>0&&(s(i),e.removeClass("is-active").css("display","flex").hide(),t.addClass("is-active").css("display","flex").hide().fadeIn())}),v.each(function(){var e=$(this);e.on("click",function(a){a.preventDefault();var n=$(".js-quiz").offset().top,r=$(a.target),l=r.attr("data-quiz-direction");if("BUTTON"===r.prop("tagName")){var p=e.parents(".js-quiz-step"),d=p.next(".js-quiz-step"),c=p.prev(".js-quiz-step"),u=d.index(),f=c.index();p.find("input[type=radio]:checked").length,p.find("input[type=checkbox]:checked").length,p.find("input[type=text]");if("next"===l){if(!d.length)return;s(u),p.removeClass("is-active").css("display","flex").hide(),d.addClass("is-active").css("display","flex").hide().fadeIn()}else if("prev"===l){if(!c.length)return;p.removeClass("is-error"),t(f),p.removeClass("is-active").css("display","flex").hide(),c.addClass("is-active").css("display","flex").hide().fadeIn()}"submit"==r.attr("type")&&i(a,$(".js-quiz-form")),o<767&&$("html, body").animate({scrollTop:n},170)}})}),h.find("input[type=radio]").on("change",function(){$(this).parents(".js-quiz-step").hasClass("is-error")&&$(this).parents(".js-quiz-step").removeClass("is-error")})}$(".js-prev-page-link").on("click",function(e){e.preventDefault(),window.history.go(-1)}),$(".js-required-quiz-field").on("focus",function(){$(this).parents(".js-quiz-step").hasClass("is-error")&&$(this).parents(".js-quiz-step").removeClass("is-error")}),$(".js-required-input").on("focus",function(){$(this).hasClass("is-error")&&$(this).removeClass("is-error")}),$(".form").submit(function(e){e.preventDefault();var s=$(this);if(inputs=s.find(".js-required-input"),flag=!0,$(inputs).each(function(){$(this).val()&&""!=$(this).val()||($(this).addClass("is-error"),flag=!1)}),!flag)return!1;$.ajax({type:"POST",url:"mail.php",data:s.serialize()}).done(function(){setTimeout(function(){s.trigger("reset")},2e3)})}),setTimeout(function(){$("body").addClass("is-loaded")},1500)});